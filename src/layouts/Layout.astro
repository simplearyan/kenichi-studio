---
interface Props {
    title?: string;
    description?: string;
    image?: string;
    showFooter?: boolean;
    showAds?: boolean;
    isApp?: boolean;
}

const {
    title,
    description,
    image,
    showFooter = true,
    showAds = true,
    isApp = false,
} = Astro.props;

import SEOHead from "@/components/seo/SEOHead.astro";
import PWAMeta from "@/components/pwa/PWAMeta.astro";
import ThemeScript from "@/components/pwa/ThemeScript.astro";
import Footer from "@/layouts/components/Footer.astro";
import VerticalAd from "@shared/ads/VerticalAd.astro";
import "../styles/typography.css";
import "../styles/inspector.css";
---

<!doctype html>
<html lang="en" class={isApp ? "h-full overflow-hidden" : ""}>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content={Astro.generator} />

        <!-- SEO Meta Tags -->
        <SEOHead title={title} description={description} image={image} />

        <!-- PWA Meta Tags -->
        <PWAMeta />

        <!-- Theme Initialization -->
        <ThemeScript />

        <!-- Google AdSense -->
        <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7993314093599705"
            crossorigin="anonymous"></script>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;500;600;700&family=Kalam:wght@300;400;700&family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body
        class={`font-sans antialiased text-slate-900 bg-white dark:bg-neutral-950 dark:text-neutral-50 ${isApp ? "h-full w-full overflow-hidden select-none" : ""}`}
    >
        <!-- Ad Rails -->
        {
            showAds && (
                <>
                    <div class="ad-rail left-rail">
                        <VerticalAd />
                    </div>
                    <div class="ad-rail right-rail">
                        <VerticalAd />
                    </div>
                </>
            )
        }

        <slot />
        {showFooter && <Footer />}
    </body>
</html>

<style is:global>
    /* Global scrollbar for that modern feel */
    ::-webkit-scrollbar {
        width: 8px;
    }
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
    }

    /* Ad Rails */
    .ad-rail {
        position: fixed;
        top: 50%;
        transform: translateY(-50%);
        z-index: 40; /* Behind some overlays but above basics */
        display: none;
    }

    .left-rail {
        left: 1rem;
    }

    .right-rail {
        right: 1rem;
    }

    /* Show on very large screens */
    @media (min-width: 1600px) {
        .ad-rail {
            display: block;
        }
    }

    /* Helper to re-enable selection for inputs even if body is select-none */
    .select-none input,
    .select-none textarea,
    .select-none [contenteditable] {
        -webkit-user-select: text;
        user-select: text;
    }
</style>
